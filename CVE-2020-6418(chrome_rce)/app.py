from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from flask import Flask,request

app = Flask(__name__)

@app.route('/', methods=['GET'])
def index():
    url = request.args.get('url')
    if url:
        # Chrome参数设置
        chrome_options = Options()
        chrome_options.add_argument("--headless")  # 无头模式，可选
        chrome_options.add_argument("--no-sandbox")  # 禁用沙箱，可选
        chrome_options.add_argument("--disable-dev-shm-usage")  # 禁用共享内存，可选
        # 创建Chrome浏览器实例
        driver = webdriver.Chrome(options=chrome_options)
        # 发出请求并获取页面内容
        driver.get(url)
        page_content = driver.page_source
        # 打印页面内容
        return page_content
        # 关闭浏览器实例
        driver.quit()
    else:
        return "输入url参数"
    

if __name__ == '__main__':
    app.run(debug=True,host='0.0.0.0',port=80)